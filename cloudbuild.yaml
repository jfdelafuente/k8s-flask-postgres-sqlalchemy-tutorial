# [START cloudbuild_python_dependencies_yaml]
steps:
# [START cloudbuild_python_image_yaml]
# Docker Build
  - name: 'gcr.io/cloud-builders/docker'
    id: Build Container Image
    args: ['build', '-t', 'us-central1-docker.pkg.dev/${PROJECT_ID}/${_ARTIFACT_REGISTRY_REPO}/hello-app:${SHORT_SHA}', '.']
# [END cloudbuild_python_image_yaml]

# [START cloudbuild_python_push_yaml]
# Docker push to Google Artifact Registry
  - name: 'gcr.io/cloud-builders/docker'
    id: Push Image to Container Registry
    args: ['push',  'us-central1-docker.pkg.dev/${PROJECT_ID}/${_ARTIFACT_REGISTRY_REPO}/hello-app:${SHORT_SHA}']
# [END cloudbuild_python_push_yaml]
# Store images in Google Artifact Registry 
images:
  - us-central1-docker.pkg.dev/${PROJECT_ID}/${_ARTIFACT_REGISTRY_REPO}/myimage:${SHORT_SHA}
# [END cloudbuild_python_yaml]
options:
  logging: CLOUD_LOGGING_ONLY